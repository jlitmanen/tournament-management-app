<div>
    <button type="button" onclick="addRow()">Add result</button>
    <table class="table table-striped table-dark" id="results">
        <thead>
            <tr>
                <th>Home</th><th>Away</th><th>HW</th><th>AW</th><th title="Result">Result</th><th title="Played">P</th><th title="Reported">R</th><th title="Withdraw">W</th><th>Open</th><th></th>          
            </tr>
        </thead>
        <tbody>
            <% results.forEach(function(c) { %>
                <%
                    function getSelected(player, playerId) {
                        if(player === playerId) {
                            return "selected";
                        } else {
                            return "";
                        }
                    }
                    function getChecked(value) {
                        if(value) {
                            return "checked";
                        } else {
                            return "";
                        }
                    }
                %>
                <tr>
                    <form action="/admin/results" method="post">
                        <td contenteditable="true">
                            <select class="custom-select my-1 mr-sm-2"  name="home" id="home" onchange="setGroup()">
                                <% players?.forEach(function(p) { %>
                                    <option value='<%=p.id %>' group="<%= p.group %>" <%- getSelected(c.home, p.id) %>>
                                        <%= p.name %>
                                    </option>
                                <% }) %>
                            </select>
                        </td>
                        <td contenteditable="true">
                            <select class="custom-select my-1 mr-sm-2"  name="away" id="away"  onchange="setGroup()">
                                <% players?.forEach(function(p) { %>
                                    <option value='<%=p.id %>' group="<%= p.group %>" <%- getSelected(c.away, p.id) %>>
                                        <%= p.name %>
                                    </option>
                                <% }) %>
                            </select>
                        </td>
                        <td><input style="width: 3em;" type="number" name="homeWins" value="<%- c.homeWins %>"></td>
                        <td><input style="width: 3em;" type="number" name="awayWins" value="<%- c.awayWins %>"></td>
                        <td>
                            <textarea name="result" id="res"><%- c.result %></textarea>
                        </td>
                        <td>
                            <input type="checkbox" <%- getChecked(c.played) %>>
                        </td>
                        <td>
                            <input type="checkbox" <%- getChecked(c.reported) %>>
                        </td>
                        <td>
                            <input type="checkbox" <%- getChecked(c.withdraw) %>>
                        </td>
                        <td contenteditable="true">
                            <select class="custom-select my-1 mr-sm-2" name="opens" id="opens">
                                <option value=""  <%- getSelected(c.openId, '') %>>Valitse: </option>
                                <% opens?.forEach(function(o) { %>
                                    <option value='<%= o.id %>'  <%- getSelected(c.openId, o.id) %>>
                                        <%= o.name %>
                                    </option>
                                <% }) %>
                            </select>
                        </td>
                        <td>
                            <input type="hidden" name="id" id="id" value="<%= c.id %>"/>
                            <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
                            <input type="submit" value="Save" class="save" >
                        </td>
                    </form>
                </tr>
                
            <% }) %>
        </tbody>
    </table>
</div>
<script>
    function setGroup()ar cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        cell1.innerHTML = "NEW CELL1";
        celw() {
        // Get a reference to the table
        var tableRef = document.getElementById("results");
        var newRow   = tableRef.insertRow(0);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        cell1.innerHTML = "NEW CELL1";
        cell2.innerHTML = "NEW CELL2";
    }
</script>